function pics_call = compose_pics_call(MR)
%Create the string that can be passed to the BART pics functionality.
%
% V20180129 - T.Bruijnen

pics_call='pics -e -S -t';

% Wavelet regularization
if ~isempty(MR.UMCParameters.IterativeReconstruction.WaveletLambda)
    pics_call=strcat(pics_call,[' -r',num2str(MR.UMCParameters.IterativeReconstruction.WaveletLambda)]);
end

% Total variation regularization
if ~isempty(MR.UMCParameters.IterativeReconstruction.TVLambda)
    % Create bitmask depending on the dimensions
    tv_idx=find(MR.UMCParameters.IterativeReconstruction.TVLambda>0);
    bm=@(x)(sum(2.^x));
    pics_call=strcat(pics_call,[ '-R T:',num2str(bm(tv_idx-1)),':0:',...
        num2str(MR.UMCParameters.IterativeReconstruction.TVLambda(tv_idx))]);
end
% END
end
